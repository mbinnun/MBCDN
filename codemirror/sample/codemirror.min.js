var EDITapiReadFileOrig="readfile.php",EDITapiSaveFileOrig="savefile.php";"undefined"!=typeof EDITapiReadFile&&EDITapiReadFile&&(EDITapiReadFileOrig=EDITapiReadFile),"undefined"!=typeof EDITapiSaveFile&&EDITapiSaveFile&&(EDITapiSaveFileOrig=EDITapiSaveFile),EDITflgSample=!1,BF.strDomain.indexOf("rawgit.com")>-1&&BF.strUrl.indexOf("/sample")>-1&&(EDITflgSample=!0);var WLISTAddMoreHints=function(){};"undefined"!=typeof WLISTAddOwnHints&&WLISTAddOwnHints&&(WLISTAddMoreHints=WLISTAddOwnHints);var EDITLoadTextOnInit=function(){if(EDIT.initialValue="Loading the file contents, please wait ...",EDIT.editorPref.readOnly="nocursor",EDITLoadTextWait=window.setTimeout(EDITLoadTextWait,500),EDIT.filePath=BF.GetQsVar("file"),BF.Contains(EDIT.filePath,"/")?EDIT.fileName=BF.AfterLastSplit(EDIT.filePath,"/"):EDIT.fileName=EDIT.filePath,document.title=EDIT.fileName+" - Online Code Editor",EDITflgSample){for(var e="Sample Text",i=0;i<3;i++)e+=" "+e;for(i=0;i<2;i++)e+="\n"+e;EDIT.codeMirror.setValue(e),EDIT.codeMirror.setOption("readOnly",""),EDIT.codeMirror.clearHistory(),EDIT.codeMirror.focus()}else BF.HttpPostRequest(EDITapiReadFileOrig,"path="+encodeURIComponent(EDIT.filePath),function(e){window.clearTimeout(EDITLoadTextWait),EDITLoadTextWait=null,window.setTimeout(function(){try{var i=JSON.parse(e);1==i.status?(EDIT.codeMirror.setValue(i.response),EDIT.codeMirror.setOption("readOnly",""),EDIT.codeMirror.clearHistory(),EDIT.codeMirror.focus()):EDIT.codeMirror.setValue("*** File not found / Access denied ! ***\n*** Make sure that the file really exists, and look for an alternative way to edit it. ***")}catch(e){EDIT.codeMirror.setValue("*** This file containts binary data. ***\n*** Do not edit this file using the editor !!! ***")}EDIT.savedValue=EDIT.codeMirror.getValue(),EDIT.UpdateSave()},50)})},EDITLoadTextWait=function(){EDIT.codeMirror.setValue(EDIT.codeMirror.getValue()+"."),EDITLoadTextWait=window.setTimeout(EDITLoadTextWait,500)},EDITSave=function(){EDITflgSample?(EDIT.savedValue=EDIT.codeMirror.getValue(),EDIT.UpdateSave()):BF.HttpPostRequest(EDITapiSaveFileOrig,"path="+encodeURIComponent(EDIT.filePath)+"&text="+encodeURIComponent(EDIT.codeMirror.getValue()),function(e){1==JSON.parse(e).status?(EDIT.savedValue=EDIT.codeMirror.getValue(),EDIT.UpdateSave()):alert("Error while saving,\nfile was not saved.")})};