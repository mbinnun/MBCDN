var FLIST={dvFlags:null,dvHeader:null,dvFileList:null,dvLoader:null,sForm:null,appVersion:"1.0",locationTop:"/mbinnun/MBCDN/master/codemirror/sample",locationShort:"samplefiles",locationWww:"https://cdn.jsdelivr.net/gh/mbinnun/MBCDN/codemirror/sample/samplefiles"};"undefined"!=typeof FLISTappVersion&&FLISTappVersion&&(FLIST.appVersion=FLISTappVersion),"undefined"!=typeof FLISTlocationTop&&FLISTlocationTop&&(FLIST.locationTop=FLISTlocationTop),"undefined"!=typeof FLISTlocationShort&&FLISTlocationShort&&(FLIST.locationShort=FLISTlocationShort),"undefined"!=typeof FLISTlocationWww&&FLISTlocationWww&&(FLIST.locationWww=FLISTlocationWww),"[ROOT]"==FLIST.locationTop&&(FLIST.locationTop=""),FLIST.location=FLIST.locationTop+"/"+FLIST.locationShort,"undefined"!=typeof FLISTlocation&&FLISTlocation&&(FLIST.location=FLISTlocation),FLIST.strEditorUrl="https://cdn.jsdelivr.net/gh/mbinnun/MBCDN/codemirror","undefined"!=typeof FLISTstrEditorUrl&&FLISTstrEditorUrl&&(FLIST.strEditorUrl=FLISTstrEditorUrl),FLIST.apiFileList="filelist.php",FLIST.apiReadFile="readfile.php",FLIST.apiSaveFile="savefile.php",FLIST.apiDeleteFile="deletefile.php",FLIST.apiUpload="upload.php",FLIST.apiMinifyCss="minifycss.php",FLIST.apiMinifyJs="minifyjs.php",FLIST.apiMkDir="mkdir.php",FLIST.apiRmDir="rmdir.php",FLIST.apiUnzip="unzip.php",FLIST.apiZip="zip.php","undefined"!=typeof FLISTapiFileList&&FLISTapiFileList&&(FLIST.apiFileList=FLISTapiFileList),"undefined"!=typeof FLISTapiReadFile&&FLISTapiReadFile&&(FLIST.apiReadFile=FLISTapiReadFile),"undefined"!=typeof FLISTapiSaveFile&&FLISTapiSaveFile&&(FLIST.apiSaveFile=FLISTapiSaveFile),"undefined"!=typeof FLISTapiDeleteFile&&FLISTapiDeleteFile&&(FLIST.apiDeleteFile=FLISTapiDeleteFile),"undefined"!=typeof FLISTapiUpload&&FLISTapiUpload&&(FLIST.apiUpload=FLISTapiUpload),"undefined"!=typeof FLISTapiMinifyCss&&FLISTapiMinifyCss&&(FLIST.apiMinifyCss=FLISTapiMinifyCss),"undefined"!=typeof FLISTapiMinifyJs&&FLISTapiMinifyJs&&(FLIST.apiMinifyJs=FLISTapiMinifyJs),"undefined"!=typeof FLISTapiMkDir&&FLISTapiMkDir&&(FLIST.apiMkDir=FLISTapiMkDir),"undefined"!=typeof FLISTapiRmDir&&FLISTapiRmDir&&(FLIST.apiRmDir=FLISTapiRmDir),"undefined"!=typeof FLISTapiUnzip&&FLISTapiUnzip&&(FLIST.apiUnzip=FLISTapiUnzip),"undefined"!=typeof FLISTapiZip&&FLISTapiZip&&(FLIST.apiZip=FLISTapiZip),FLIST.linkEdit="codemirror.html","undefined"!=typeof FLISTlinkEdit&&FLISTlinkEdit&&(FLIST.linkEdit=FLISTlinkEdit),FLIST.flgSample=!1,BF.strDomain.indexOf("rawgit.com")>-1&&BF.strUrl.indexOf("/sample")>-1&&(FLIST.flgSample=!0,FLIST.apiUpload="api/upload.php.sample.html"),FLIST.CreateSkel=function(){FLIST.dvFlags=BF.AddElementToDom(document.body,"div","flags"),FLIST.dvHeader=BF.AddElementToDom(document.body,"div","header"),FLIST.dvFileList=BF.AddElementToDom(document.body,"div","file_list"),FLIST.dvLoader=BF.AddElementToDom(document.body,"div","bigloader"),FLIST.dvLoader.innerHTML="Please wait ..."},FLIST.CreateTopArea=function(){FLIST.sForm=BF.AddElementToDom(FLIST.dvFlags,"form","sForm"),FLIST.sForm.name="sForm",FLIST.sForm.method="GET",FLIST.sForm.action="",FLIST.inpShowImg=BF.AddElementToDom(FLIST.sForm,"input","showimg"),FLIST.inpShowImg.name="showimg",FLIST.inpShowImg.type="checkbox",FLIST.inpShowImg.value="1",FLIST.sForm.innerHTML+=" img | ",FLIST.inpShowPhp=BF.AddElementToDom(FLIST.sForm,"input","showphp"),FLIST.inpShowPhp.name="showphp",FLIST.inpShowPhp.type="checkbox",FLIST.inpShowPhp.value="1",FLIST.sForm.innerHTML+=" php | ",FLIST.inpShowAll=BF.AddElementToDom(FLIST.sForm,"input","showall"),FLIST.inpShowAll.name="showall",FLIST.inpShowAll.type="checkbox",FLIST.inpShowAll.value="1",FLIST.sForm.innerHTML+=" all","1"==FLIST.flgShowImg&&(FLIST.sForm.showimg.checked=!0),"1"==FLIST.flgShowPhp&&(FLIST.sForm.showphp.checked=!0),"1"==FLIST.flgShowAll&&(FLIST.sForm.showall.checked=!0),window.setTimeout(function(){BF.ElementEvent(document.getElementById("showimg"),"click",function(){FLIST.sForm.submit()}),BF.ElementEvent(document.getElementById("showphp"),"click",function(){FLIST.sForm.submit()}),BF.ElementEvent(document.getElementById("showall"),"click",function(){FLIST.sForm.submit()})},10)},FLIST.LoadLocalCss=function(){BF.LoadAsyncCss(FLIST.strEditorUrl+"/sample/filelist.min.css?v="+FLIST.appVersion)},FLIST.BuildList=function(){if(FLIST.h1Title=BF.AddElementToDom(FLIST.dvHeader,"h1",null,"wordwrap"),FLIST.h1Title.innerHTML=FLIST.location,FLIST.postData="dir="+encodeURIComponent(FLIST.location),FLIST.postData+="&showimg="+encodeURIComponent(FLIST.flgShowImg),FLIST.postData+="&showphp="+encodeURIComponent(FLIST.flgShowPhp),FLIST.postData+="&showall="+encodeURIComponent(FLIST.flgShowAll),FLIST.flgSample){var e=JSON.stringify({samplefiles:{0:"sample.js",1:"sample.html",2:"sample.jpg",test:{0:"test.php",api:["test.json"]}}});FLIST.ParseFileList(e)}else BF.HttpPostRequest(FLIST.apiFileList,FLIST.postData,FLIST.ParseFileList)},FLIST.ParseFileList=function(e){var i=JSON.parse(e);FLIST.dvFileList.innerHTML=FLIST.IterateFileList(i,FLIST.locationTop),window.setTimeout(function(){document.getElementById("dirname_1")&&FLIST.ToggleFileList(1)},100)},FLIST.GetEditorType=function(e){var i=null;return"html"!=e&&"htm"!=e||(i="html"),"xml"==e&&(i="xml"),"php"==e&&(i="php"),"api"==e&&(i="php"),"asp"==e&&(i="asp"),"aspx"==e&&(i="aspx"),"js"==e&&(i="js"),"json"==e&&(i="json"),"css"==e&&(i="css"),"python"==e&&(i="python"),"py"==e&&(i="python"),"sql"==e&&(i="sql"),"c"==e&&(i="c"),"cpp"==e&&(i="cpp"),"java"==e&&(i="java"),"cs"==e&&(i="cs"),i},FLIST.VPathFix=function(e){return"undefined"!=typeof FLISTVPathFix&&FLISTVPathFix?FLISTVPathFix(e):null},FLIST.iElemId=0,FLIST.IterateFileList=function(e,i){var t="";for(var l in e){var n=e[l];null===n||"object"!=typeof n&&!n.isArray||(FLIST.iElemId++,""!=t&&(t+="<br>"),t+="<span id='dirsign_"+FLIST.iElemId+"' class='dirsign' onclick='FLIST.ToggleFileList("+FLIST.iElemId+");'>+</span> <span id='dirname_"+FLIST.iElemId+"' class='dirname' title='expand/collapse folder' onclick='FLIST.ToggleFileList("+FLIST.iElemId+");'>"+l+"</span>",t+=" <a id='dirmkdir_"+FLIST.iElemId+"' class='dircreate' title='make new folder in dir' href='javascript:FLIST.CreateDirInDir("+FLIST.iElemId+',"'+i+"/"+l+"\");'>[D]</a>",t+=" <a id='dircreate_"+FLIST.iElemId+"' class='dircreate' title='create new file in dir' href='javascript:FLIST.CreateFileInDir("+FLIST.iElemId+',"'+i+"/"+l+"\");'>[C]</a>",t+=" <a id='dirupload_"+FLIST.iElemId+"' class='dircreate' title='upload new file into dir' href='javascript:window.location.href=\""+FLIST.apiUpload+"?path="+encodeURIComponent(i+"/"+l)+"\";'>[U]</a>",t+=" <a id='dirbck_"+FLIST.iElemId+"' class='dircreate' title='backup to zip' href='javascript:FLIST.ZipDir("+FLIST.iElemId+',"'+i+"/"+l+"\");'>[K]</a>",t+=" <a id='dirdelete_"+FLIST.iElemId+"' class='dircreate' title='delete whole dir' href='javascript:FLIST.DeleteDir("+FLIST.iElemId+',"'+i+"/"+l+"\");'>[X]</a>",t+="<br id='dirbr_"+FLIST.iElemId+"' class='dirbr'><div id='dirlist_"+FLIST.iElemId+"' class='dirlist'>"+FLIST.IterateFileList(n,i+"/"+l)+"</div>")}for(var a in e){var o=e[a];if(null===o||"object"!=typeof o&&!o.isArray){FLIST.iElemId++,""!=t&&(t+="<br>");var s="txt",r="";o.indexOf(".")>-1&&(r=o.split(".")[o.split(".").length-1]);var d=FLIST.GetEditorType(r);d&&(s=d),"vhosts-template.txt"==o&&(s="apache_conf");var I=FLIST.location,F=FLIST.locationWww,p=FLIST.VPathFix(i);p&&(I=p[0],F=p[1]),t+="<span id='filesign_"+FLIST.iElemId+"' class='filesign'>%</span> <a id='filename_"+FLIST.iElemId+"' class='filename' title='edit file with text editor' target='_blank' href='"+FLIST.linkEdit+"?type="+s+"&amp;file="+encodeURIComponent(i+"/"+o)+"'>"+o+"</a>",""!=F&&(t+=" <a id='fileview_"+FLIST.iElemId+"' class='fileview' title='view file in browser' target='_blank' href='"+i.replace(I,F)+"/"+o+"'>[V]</a>"),"js"==r&&(t+=" <a id='filemin_"+FLIST.iElemId+"' class='fileview' title='generate a minified js file' href='javascript:FLIST.MinifyJsFile("+FLIST.iElemId+',"'+i+"/"+o+"\");'>[M]</a>"),"css"==r&&(t+=" <a id='filemin_"+FLIST.iElemId+"' class='fileview' title='generate a minified css file' href='javascript:FLIST.MinifyCssFile("+FLIST.iElemId+',"'+i+"/"+o+"\");'>[M]</a>"),"zip"==r&&(t+=" <a id='filezip_"+FLIST.iElemId+"' class='fileview' title='unzip this file' href='javascript:FLIST.UnzipFile("+FLIST.iElemId+',"'+i+"/"+o+"\");'>[Z]</a>"),t+=" <a id='filedelete_"+FLIST.iElemId+"' class='filedelete' title='delete file' href='javascript:FLIST.DeleteFile("+FLIST.iElemId+',"'+i+"/"+o+"\");'>[X]</a>"}}return t},FLIST.ToggleFileList=function(e){var i=document.getElementById("dirname_"+e),t=document.getElementById("dirsign_"+e),l=document.getElementById("dirbr_"+e),n=document.getElementById("dirlist_"+e),a=document.getElementById("dirmkdir_"+e),o=document.getElementById("dircreate_"+e),s=document.getElementById("dirupload_"+e),r=document.getElementById("dirbck_"+e),d=document.getElementById("dirdelete_"+e);"+"==t.innerHTML&&"#ccc"!=i.style.color&&"rgb(204, 204, 204)"!=i.style.color?(t.innerHTML="-",l.style.display="inline-block",n.style.display="inline-block",a.style.display="inline-block",o.style.display="inline-block",s.style.display="inline-block",r.style.display="inline-block",d.style.display="inline-block"):(d.style.display="none",r.style.display="none",s.style.display="none",a.style.display="none",o.style.display="none",n.style.display="none",l.style.display="none",t.innerHTML="+")},FLIST.DeleteFile=function(e,i){if(confirm("Delete File,\nAre you sure?"))if(FLIST.flgSample){var t=JSON.stringify({status:1,response:""});FLIST.DeleteFileDone(t,e,i)}else BF.HttpPostRequest(FLIST.apiDeleteFile,"path="+encodeURIComponent(i),function(t){FLIST.DeleteFileDone(t,e,i)})},FLIST.DeleteFileDone=function(e,i,t){var l=null;try{l=JSON.parse(e)}catch(e){}if(l&&l.status&&1==l.status){var n=document.getElementById("filename_"+i),a=document.getElementById("fileview_"+i),o=document.getElementById("filemin_"+i),s=document.getElementById("filezip_"+i),r=document.getElementById("filedelete_"+i);n.style.textDecoration="line-through",n.style.color="#ccc",n.href="javascript:return false;",a&&(a.style.display="none"),o&&(o.style.display="none"),s&&(s.style.display="none"),r.style.display="none"}else alert("Error while deleting!\nFile was not changed.")},FLIST.MinifyJsFile=function(e,i){if(confirm("Any previous minified versions of this JS\nwill be overriden with the current version.\n\nContinue generating?"))if(FLIST.dvLoader.style.display="block",FLIST.flgSample){var t=JSON.stringify({status:1,response:"",flgNew:!0});FLIST.MinifyJsFileDone(t,e,i)}else BF.HttpPostRequest(FLIST.apiMinifyJs,"path="+encodeURIComponent(i),function(t){FLIST.MinifyJsFileDone(t,e,i)})},FLIST.MinifyJsFileDone=function(e,i,t){FLIST.dvLoader.style.display="none";var l=null;try{l=JSON.parse(e)}catch(e){}if(l&&l.status&&1==l.status){if(l.flgNew){var n,a=BF.AfterLastSplit(t,"/"),o=BF.ReplaceLast(t,a,"");a=BF.ReplaceLast(a,".js",".min.js"),n="-1"!=i?document.getElementById("filemin_"+i):document.getElementById("file_list");var s="";FLIST.iElemId++;var r="txt",d="";a.indexOf(".")>-1&&(d=a.split(".")[a.split(".").length-1]);var I=FLIST.GetEditorType(d);I&&(r=I),"vhosts-template.txt"==a&&(r="apache_conf");var F=FLIST.location,p=FLIST.locationWww,S=FLIST.VPathFix(t);S&&(F=S[0],p=S[1]),s+="<span id='filesign_"+FLIST.iElemId+"' class='filesign'>%</span> <a id='filename_"+FLIST.iElemId+"' class='filename' style='color:#3a3' title='edit file with text editor' target='_blank' href='"+FLIST.linkEdit+"?type="+r+"&amp;file="+encodeURIComponent(o+"/"+a)+"'>"+a+"</a>",""!=p&&(s+=" <a id='fileview_"+FLIST.iElemId+"' class='fileview' title='view file in browser' target='_blank' href='"+o.replace(F,p)+"/"+a+"'>[V]</a>"),s+=" <a id='filedelete_"+FLIST.iElemId+"' class='filedelete' title='delete file' href='javascript:FLIST.DeleteFile("+FLIST.iElemId+',"'+o+"/"+a+"\");'>[X]</a>",""!=n.parentNode.innerHTML&&(s+="<br>"),n.parentNode.innerHTML=s+n.parentNode.innerHTML}window.setTimeout(function(){alert("Minified JS successfully.")},10)}else window.setTimeout(function(){alert("Error during minify!\nFile was not minified.")},10)},FLIST.MinifyCssFile=function(e,i){if(confirm("Any previous minified versions of this CSS\nwill be overriden with the current version.\n\nContinue generating?"))if(FLIST.dvLoader.style.display="block",FLIST.flgSample){var t=JSON.stringify({status:1,response:"",flgNew:!0});FLIST.MinifyCssFileDone(t,e,i)}else BF.HttpPostRequest(FLIST.apiMinifyCss,"path="+encodeURIComponent(i),function(t){FLIST.MinifyCssFileDone(t,e,i)})},FLIST.MinifyCssFileDone=function(e,i,t){FLIST.dvLoader.style.display="none";var l=null;try{l=JSON.parse(e)}catch(e){}if(l&&l.status&&1==l.status){if(l.flgNew){var n,a=BF.AfterLastSplit(t,"/"),o=BF.ReplaceLast(t,a,"");a=BF.ReplaceLast(a,".css",".min.css"),n="-1"!=i?document.getElementById("filemin_"+i):document.getElementById("file_list");var s="";FLIST.iElemId++;var r="txt",d="";a.indexOf(".")>-1&&(d=a.split(".")[a.split(".").length-1]);var I=FLIST.GetEditorType(d);I&&(r=I),"vhosts-template.txt"==a&&(r="apache_conf");var F=FLIST.location,p=FLIST.locationWww,S=FLIST.VPathFix(t);S&&(F=S[0],p=S[1]),s+="<span id='filesign_"+FLIST.iElemId+"' class='filesign'>%</span> <a id='filename_"+FLIST.iElemId+"' class='filename' style='color:#3a3' title='edit file with text editor' target='_blank' href='"+FLIST.linkEdit+"?type="+r+"&amp;file="+encodeURIComponent(o+"/"+a)+"'>"+a+"</a>",""!=p&&(s+=" <a id='fileview_"+FLIST.iElemId+"' class='fileview' title='view file in browser' target='_blank' href='"+o.replace(F,p)+"/"+a+"'>[V]</a>"),s+=" <a id='filedelete_"+FLIST.iElemId+"' class='filedelete' title='delete file' href='javascript:FLIST.DeleteFile("+FLIST.iElemId+',"'+o+"/"+a+"\");'>[X]</a>",""!=n.parentNode.innerHTML&&(s+="<br>"),n.parentNode.innerHTML=s+n.parentNode.innerHTML}window.setTimeout(function(){alert("Minified CSS successfully.")},10)}else window.setTimeout(function(){alert("Error during minify!\nFile was not minified.")},10)},FLIST.DeleteDir=function(e,i){if(confirm("Delete whole folder!\nAre you sure?"))if(FLIST.flgSample){var t=JSON.stringify({status:1,response:""});FLIST.DeleteDirDone(t,e,i)}else BF.HttpPostRequest(FLIST.apiRmDir,"path="+encodeURIComponent(i),function(t){FLIST.DeleteDirDone(t,e,i)})},FLIST.DeleteDirDone=function(e,i,t){var l=null;try{l=JSON.parse(e)}catch(e){}if(l&&l.status&&1==l.status){var n=document.getElementById("dirname_"+i),a=document.getElementById("dirsign_"+i),o=document.getElementById("dirbr_"+i),s=document.getElementById("dirlist_"+i),r=document.getElementById("dirmkdir_"+i),d=document.getElementById("dircreate_"+i),I=document.getElementById("dirupload_"+i),F=document.getElementById("dirbck_"+i),p=document.getElementById("dirdelete_"+i);s.innerHTML="",n.style.textDecoration="line-through",n.style.color="#ccc",r.style.display="none",d.style.display="none",I.style.display="none",F.style.display="none",p.style.display="none",s.style.display="none",o.style.display="none",a.innerHTML="+"}else alert("Error while deleting!\nFile was not changed.")},FLIST.CreateFileInDir=function(e,i){var t=prompt("Enter a filename\nto be created/overwritten.\n\nWarning! If the file already exists\nthen it will be overwritten !!","");if(null!=t&&""!=t){var l=i+"/"+t;if(FLIST.flgSample){var n=JSON.stringify({status:1,response:""});FLIST.CreateFileInDirDone(n,e,i,t,l,"")}else BF.HttpPostRequest(FLIST.apiSaveFile,"path="+encodeURIComponent(l)+"&text="+encodeURIComponent(""),function(n){FLIST.CreateFileInDirDone(n,e,i,t,l,"")})}},FLIST.CreateFileInDirDone=function(e,i,t,l,n,a){var o=null;try{o=JSON.parse(e)}catch(e){}if(o&&o.status&&1==o.status){var s;s="-1"!=i?document.getElementById("dirlist_"+i):document.getElementById("file_list");var r="";FLIST.iElemId++;var d="txt",I="";l.indexOf(".")>-1&&(I=l.split(".")[l.split(".").length-1]);var F=FLIST.GetEditorType(I);F&&(d=F),"vhosts-template.txt"==l&&(d="apache_conf");var p=FLIST.location,S=FLIST.locationWww,L=FLIST.VPathFix(t);L&&(p=L[0],S=L[1]),r+="<span id='filesign_"+FLIST.iElemId+"' class='filesign'>%</span> <a id='filename_"+FLIST.iElemId+"' class='filename' style='color:#3a3' title='edit file with text editor' target='_blank' href='"+FLIST.linkEdit+"?type="+d+"&amp;file="+encodeURIComponent(t+"/"+l)+"'>"+l+"</a>",""!=S&&(r+=" <a id='fileview_"+FLIST.iElemId+"' class='fileview' title='view file' target='_blank' href='"+t.replace(p,S)+"/"+l+"'>[V]</a>"),"js"==I&&(r+=" <a id='filemin_"+FLIST.iElemId+"' class='fileview' title='generate a minified js file' href='javascript:FLIST.MinifyJsFile("+FLIST.iElemId+',"'+t+"/"+l+"\");'>[M]</a>"),"css"==I&&(r+=" <a id='filemin_"+FLIST.iElemId+"' class='fileview' title='generate a minified css file' href='javascript:FLIST.MinifyCssFile("+FLIST.iElemId+',"'+t+"/"+l+"\");'>[M]</a>"),"zip"==I&&(r+=" <a id='filezip_"+FLIST.iElemId+"' class='fileview' title='unzip this file' href='javascript:FLIST.UnzipFile("+FLIST.iElemId+',"'+t+"/"+l+"\");'>[Z]</a>"),r+=" <a id='filedelete_"+FLIST.iElemId+"' class='filedelete' title='delete file' href='javascript:FLIST.DeleteFile("+FLIST.iElemId+',"'+t+"/"+l+"\");'>[X]</a>",""!=s.innerHTML&&(r+="<br>"),s.innerHTML=r+s.innerHTML}else alert("Error while creating file!\nFile was not added.")},FLIST.CreateDirInDir=function(e,i){var t=prompt("Enter a new folder name\nto be created.\n\n(You will not be able to re-create\nan existing folder)","");if(null!=t&&""!=t){var l=i+"/"+t;if(FLIST.flgSample){var n=JSON.stringify({status:1,response:""});FLIST.CreateDirInDirDone(n,e,i,t,l,"")}else BF.HttpPostRequest(FLIST.apiMkDir,"path="+encodeURIComponent(l),function(n){FLIST.CreateDirInDirDone(n,e,i,t,l,"")})}},FLIST.CreateDirInDirDone=function(e,i,t,l,n,a){var o=null;try{o=JSON.parse(e)}catch(e){}if(o&&o.status&&1==o.status){var s;s="-1"!=i?document.getElementById("dirlist_"+i):document.getElementById("file_list");var r="";FLIST.iElemId++,r+="<span id='dirsign_"+FLIST.iElemId+"' class='dirsign' onclick='FLIST.ToggleFileList("+FLIST.iElemId+");'>+</span> <span id='dirname_"+FLIST.iElemId+"' class='dirname' style='color:#3a3' title='expand/collapse folder' onclick='FLIST.ToggleFileList("+FLIST.iElemId+");'>"+l+"</span>",r+=" <a id='dirmkdir_"+FLIST.iElemId+"' class='dircreate' title='make new folder in dir' href='javascript:FLIST.CreateDirInDir("+FLIST.iElemId+',"'+t+"/"+l+"\");'>[D]</a>",r+=" <a id='dircreate_"+FLIST.iElemId+"' class='dircreate' title='create new file in dir' href='javascript:FLIST.CreateFileInDir("+FLIST.iElemId+',"'+t+"/"+l+"\");'>[C]</a>",r+=" <a id='dirupload_"+FLIST.iElemId+"' class='dircreate' title='upload new file into dir' href='javascript:window.location.href=\""+FLIST.apiUpload+"?path="+encodeURIComponent(t+"/"+l)+"\";'>[U]</a>",r+=" <a id='dirbck_"+FLIST.iElemId+"' class='dircreate' title='backup to zip' href='javascript:FLIST.ZipDir("+FLIST.iElemId+',"'+t+"/"+l+"\");'>[K]</a>",r+=" <a id='dirdelete_"+FLIST.iElemId+"' class='dircreate' title='delete whole dir' href='javascript:FLIST.DeleteDir("+FLIST.iElemId+',"'+t+"/"+l+"\");'>[X]</a>",r+="<br id='dirbr_"+FLIST.iElemId+"' class='dirbr'><div id='dirlist_"+FLIST.iElemId+"' class='dirlist'></div>",""!=s.innerHTML&&(r+="<br>"),s.innerHTML=r+s.innerHTML}else alert("Error while creating folder!\nForbidden or already exists.")},FLIST.UnzipFile=function(e,i){if(confirm("The extracted data will override\nany data exists on the same location.\n\nContinue unzipping?")){FLIST.dvLoader.style.display="block";var t=BF.AfterLastSplit(i,"/"),l=BF.ReplaceLast(i,t,"");if(FLIST.flgSample){var n=JSON.stringify({status:1,response:""});FLIST.UnzipFileDone(n,e,i,t,l)}else BF.HttpPostRequest(FLIST.apiUnzip,"path="+encodeURIComponent(l)+"&file="+encodeURIComponent(t),function(n){FLIST.UnzipFileDone(n,e,i,t,l)})}},FLIST.UnzipFileDone=function(e,i,t,l,n){FLIST.dvLoader.style.display="none";var a=null;try{a=JSON.parse(e)}catch(e){}a&&a.status&&1==a.status?window.setTimeout(function(){alert("Extracted ZIP successfully."),window.location.reload()},10):window.setTimeout(function(){alert("Error during extraction!\nThe action was not completed.")},10)},FLIST.ZipDir=function(e,i){if(confirm("Create a ZIP from this folder?")){FLIST.dvLoader.style.display="block";var t=BF.AfterLastSplit(i,"/"),l=BF.ReplaceLast(i,t,"");if(FLIST.flgSample){var n=JSON.stringify({status:1,response:""});FLIST.ZipDirDone(n,e,i,t,l)}else BF.HttpPostRequest(FLIST.apiZip,"path="+encodeURIComponent(l)+"&dirname="+encodeURIComponent(t),function(n){FLIST.ZipDirDone(n,e,i,t,l)})}},FLIST.ZipDirDone=function(e,i,t,l,n){FLIST.dvLoader.style.display="none";var a=null;try{a=JSON.parse(e)}catch(e){}a&&a.status&&1==a.status?window.setTimeout(function(){alert("Created ZIP successfully."),window.location.reload()},10):window.setTimeout(function(){alert("Error during ZIP creation!\nThe action was not completed.")},10)},FLIST.Init=function(){document.title=FLIST.location+" - File List",FLIST.LoadLocalCss(),FLIST.flgShowImg=BF.GetQsVar("showimg"),FLIST.flgShowPhp=BF.GetQsVar("showphp"),FLIST.flgShowAll=BF.GetQsVar("showall"),FLIST.CreateSkel(),FLIST.CreateTopArea(),FLIST.BuildList()},FLIST.Init();